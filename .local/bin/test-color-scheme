#!/usr/bin/env bash

if [[ $# -ne 2 ]]; then
    echo "Usage: $0 [value-light] [value-dark]"
    exit 1
fi

if command -v busctl >/dev/null; then
    color_scheme=$(busctl call -j --user \
        org.freedesktop.portal.Desktop \
        /org/freedesktop/portal/desktop org.freedesktop.portal.Settings \
        Read ss org.freedesktop.appearance color-scheme | jq '.data[].data.data')
    #          Light                        No preference
    if [[ "$color_scheme" = "2" ]] || [[ "$color_scheme" = "0" ]]; then
        echo -n "$1"
    else
        echo -n "$2"
    fi
else
    echo -n "$2"
fi
